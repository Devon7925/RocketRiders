execute unless entity @s[tag=GameStarted] run scoreboard players add @s[tag=Countdown] count 1
execute as @s[scores={count=1..600}] run scoreboard players set @a dropBow 0
execute as @s[scores={count=1..599}] at @s run bossbar set rr:startgame color green
execute as @s[scores={count=1}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"30","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=1}] at @s run bossbar set rr:startgame value 30
execute as @s[scores={count=20}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"29","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=20}] at @s run bossbar set rr:startgame value 29
execute as @s[scores={count=40}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"28","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=40}] at @s run bossbar set rr:startgame value 28
execute as @s[scores={count=60}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"27","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=60}] at @s run bossbar set rr:startgame value 27
execute as @s[scores={count=80}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"26","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=80}] at @s run bossbar set rr:startgame value 26
execute as @s[scores={count=100}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"25","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=100}] at @s run bossbar set rr:startgame value 25
execute as @s[scores={count=120}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"24","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=120}] at @s run bossbar set rr:startgame value 24
execute as @s[scores={count=140}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"23","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=140}] at @s run bossbar set rr:startgame value 23
execute as @s[scores={count=160}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"22","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=160}] at @s run bossbar set rr:startgame value 22
execute as @s[scores={count=180}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"21","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=180}] at @s run bossbar set rr:startgame value 21
execute as @s[scores={count=200}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"20","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=200}] at @s run bossbar set rr:startgame value 20
execute as @s[scores={count=220}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"19","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=220}] at @s run bossbar set rr:startgame value 19
execute as @s[scores={count=240}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"18","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=240}] at @s run bossbar set rr:startgame value 18
execute as @s[scores={count=260}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"17","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=260}] at @s run bossbar set rr:startgame value 17
execute as @s[scores={count=280}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"16","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=280}] at @s run bossbar set rr:startgame value 16
execute as @s[scores={count=300}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"15","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=300}] at @s run bossbar set rr:startgame value 15
execute as @s[scores={count=320}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"14","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=320}] at @s run bossbar set rr:startgame value 14
execute as @s[scores={count=340}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"13","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=340}] at @s run bossbar set rr:startgame value 13
execute as @s[scores={count=360}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"12","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=360}] at @s run bossbar set rr:startgame value 12
execute as @s[scores={count=380}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"11","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=380}] at @s run bossbar set rr:startgame value 11
execute as @s[scores={count=400}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"10","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=400}] at @s run bossbar set rr:startgame value 10
execute as @s[scores={count=400}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=420}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"9","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=420}] at @s run bossbar set rr:startgame value 9
execute as @s[scores={count=420}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=440}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"8","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=440}] at @s run bossbar set rr:startgame value 8
execute as @s[scores={count=440}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=460}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"7","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=460}] at @s run bossbar set rr:startgame value 7
execute as @s[scores={count=460}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=480}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"6","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=480}] at @s run bossbar set rr:startgame value 6
execute as @s[scores={count=480}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=500}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"5","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=500}] at @s run bossbar set rr:startgame value 5
execute as @s[scores={count=500}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.5
execute as @s[scores={count=520}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"4","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=520}] at @s run bossbar set rr:startgame value 4
execute as @s[scores={count=520}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.6
execute as @s[scores={count=540}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"3","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=540}] at @s run bossbar set rr:startgame value 3
execute as @s[scores={count=540}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.7
execute as @s[scores={count=560}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"2","bold":true,"color":"dark_green"},{"text":" seconds.","color":"green"}]
execute as @s[scores={count=560}] at @s run bossbar set rr:startgame value 2
execute as @s[scores={count=560}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.8
execute as @s[scores={count=580}] at @s run bossbar set rr:startgame name ["",{"text":"The game is starting in ","color":"green"},{"text":"1","bold":true,"color":"dark_green"},{"text":" second.","color":"green"}]
execute as @s[scores={count=580}] at @s run bossbar set rr:startgame value 1
execute as @s[scores={count=580}] at @s run execute as @a at @s run playsound block.note_block.hat player @s ~ ~ ~ 100 0.9

execute as @s[scores={count=599..}] as @a unless entity @s[team=!Yellow,team=!Blue] run function game:putoutfire
execute as @s[tag=GameStarted,tag=!bossbarOverride] run bossbar set rr:startgame name ["",{"text":"A match is currently in progress. Feel free to join in!","color":"dark_green"}]
execute as @s[tag=GameStarted] run bossbar set rr:startgame value 30
execute as @s[tag=GameStarted] run function game:randomsplash
execute as @s[tag=GameStarted] at @a run playsound entity.generic.explode master @a ~ ~ ~ 100 1.2
execute as @s[tag=GameStarted] run tp @a[team=Yellow] 12 64 66 -180 0
execute as @s[tag=GameStarted] run tp @a[team=Blue] 12 64 -66 0 0
execute as @s[tag=GameStarted] run effect clear @a[team=Blue] resistance
execute as @s[tag=GameStarted] run effect clear @a[team=Yellow] resistance
execute as @s[tag=GameStarted] run effect give @a[team=Blue] fire_resistance 10 100 true
execute as @s[tag=GameStarted] run effect give @a[team=Yellow] fire_resistance 10 100 true
execute as @s[tag=GameStarted] run gamemode survival @a[team=Yellow]
execute as @s[tag=GameStarted] run gamemode survival @a[team=Blue]
#hotfix for being able to keep charging bow from queue
execute as @s[tag=GameStarted] run clear @a[team=Blue] bow
execute as @s[tag=GameStarted] as @a[team=Blue] run function game:saberblue
execute as @s[tag=GameStarted] run clear @a[team=Yellow] bow
execute as @s[tag=GameStarted] as @a[team=Yellow] run function game:saberyellow
execute as @s[tag=GameStarted] run tellraw @a[team=Blue] [{"text":"Drop your ","color":"aqua","italic":"true"},{"text":"Shooting Saber ","color":"blue","bold":"true","italic":"false"},{"text":"to leave the match.","color":"aqua","italic":"true"}]
execute as @s[tag=GameStarted] run tellraw @a[team=Yellow] [{"text":"Drop your ","color":"gold","italic":"true"},{"text":"Shooting Saber ","color":"yellow","bold":"true","italic":"false"},{"text":"to leave the match.","color":"gold","italic":"true"}]
execute as @s[tag=GameStarted,tag=!GameEnd] run tag @a remove CalculateWin
execute as @s[tag=GameStarted,tag=!GameEnd] run tag @a remove CalculateLoss
#hotfix for bug where jumping in queue rooms disqualifies you from ground bound
execute as @s[tag=GameStarted] run scoreboard players set @a[team=Yellow] jumps 0
execute as @s[tag=GameStarted] run scoreboard players set @a[team=Blue] jumps 0
#enabling damage gamerules (considers modifiers)
execute as @s[tag=GameStarted,tag=!NoFall] run gamerule fallDamage true
execute as @s[tag=GameStarted] run gamerule drowningDamage true
execute as @s[tag=GameStarted] run gamerule fireDamage true
execute as @s[tag=GameStarted] run scoreboard players operation @s origBCount = @s bluesCount
execute as @s[tag=GameStarted] run scoreboard players operation @s origYCount = @s yellowsCount
execute as @s[tag=GameStarted] run function lobby:credits/restart
scoreboard players set @s[tag=GameStarted] count 0
tag @s[tag=GameStarted] remove bossbarOverride
tag @s[tag=GameStarted] remove Countdown